const {Modal, Message} = Antd

class $Content extends React.Component {
  constructor(props) {
    super(props)
  }
  handleExportPdf(e) {
    e.preventDefault()
    this.props.close()
    const hide = Message.loading('正在导出...', 0)
    setTimeout(() => {
      console.log('该功能正在开发中...')
      hide()
    }, 2000)
  }
  render() {
    return (
      <div className="export-buttons">
        <a onClick={this.handleExportPdf.bind(this)}>
          <svg viewBox="0 0 1024 1024">
            <path d="M911.989715 217.145632q16.017142 16.017142 27.426612 43.443754t11.409471 50.318692l0 658.238697q0 22.818942-16.017142 38.836083t-38.836083 16.017142l-767.945147 0q-22.818942 0-38.836083-16.017142t-16.017142-38.836083l0-914.220413q0-22.818942 16.017142-38.836083t38.836083-16.017142l511.963431 0q22.818942 0 50.318692 11.409471t43.443754 27.426612zM658.275266 77.672166l0 214.805228 214.805228 0q-5.704735-16.602243-12.579673-23.404043l-178.821513-178.821513q-6.874938-6.874938-23.404043-12.579673zM877.688165 950.789229l0-585.101064-237.697307 0q-22.818942 0-38.836083-16.017142t-16.017142-38.836083l0-237.697307-438.825798 0 0 877.651596 731.37633 0zM583.967431 611.942576q18.869509 14.84694 47.978287 32.034283 33.716449-4.02257 66.847797-4.02257 83.962003 0 101.149346 28.011713 9.142204 12.579673 1.170202 29.693879 0 0.585101-0.585101 1.170202l-1.170202 1.170202 0 0.585101q-3.437469 21.721877-40.591386 21.721877-27.426612 0-65.677594-11.409471t-74.307835-30.27898q-126.308692 13.676737-224.02057 47.393186-87.399471 149.712735-138.303264 149.712735-8.557103 0-16.017142-4.02257l-13.676737-6.874938q-0.585101-0.585101-3.437469-2.852368-5.704735-5.704735-3.437469-20.551675 5.119634-22.818942 32.034283-52.293408t75.4049-55.145775q7.972002-5.119634 13.164774 3.437469 1.170202 1.170202 1.170202 2.267267 29.693879-48.563388 61.143061-112.558817 38.836083-77.672166 59.460896-149.712735-13.676737-46.881223-17.406757-91.129491t3.730019-72.845082q6.289836-22.818942 23.989144-22.818942l12.579673 0q13.164774 0 19.966574 8.557103 10.312406 11.994572 5.119634 38.836083-1.170202 3.437469-2.267267 4.534533 0.585101 1.682166 0.585101 4.534533l0 17.114206q-1.170202 70.285265-7.972002 109.70645 31.449182 93.689308 83.450039 135.96286zM254.848082 846.787515q29.693879-13.676737 78.257267-90.251839-29.108778 22.818942-50.026141 47.978287t-28.304264 42.273552zM482.306121 321.147347q-8.557103 23.989144-1.170202 75.4049 0.585101-4.02257 4.02257-25.159346 0-1.682166 4.02257-24.574245 0.585101-2.267267 2.267267-4.534533-0.585101-0.585101-0.585101-1.170202t-0.292551-0.877652-0.292551-0.877652q-0.585101-12.579673-7.460039-20.551675 0 0.585101-0.585101 1.170202l0 1.170202zM411.435755 698.830084q77.160203-30.864081 162.292408-46.296122-1.170202-0.585101-7.460039-5.412185t-9.142204-7.679451q-43.443754-38.250982-72.552532-100.564245-15.432041 49.148489-47.393186 112.558817-17.114206 32.034283-25.744447 47.393186zM780.561388 689.687879q-13.676737-13.676737-80.012571-13.676737 43.443754 16.017142 70.870366 16.017142 7.972002 0 10.312406-0.585101 0-0.585101-1.170202-1.682166z"/>
          </svg>
          <div>PDF</div>
        </a>
        <a onClick={this.handleExportPdf.bind(this)}>
          <svg viewBox="0 0 1024 1024">
            <path d="M639.776 475.888l44.208 0-51.008 226.176-66.32-318.016-106.544 0-77.12 318.016-57.824-318.016-111.392 0 113.088 511.872 108.832 0 76.288-302.704 68.256 302.704 100.336 0 129.632-511.872-170.448 0 0 91.824z"/>
            <path d="M917.808 229.072c-22.208-30.288-53.168-65.696-87.184-99.696s-69.408-64.96-99.696-87.184c-51.568-37.824-76.592-42.192-90.928-42.192l-496 0c-44.112 0-80 35.888-80 80l0 864c0 44.112 35.888 80 80 80l736 0c44.112 0 80-35.888 80-80l0-624c0-14.336-4.368-39.344-42.192-90.928l0 0zM785.376 174.624c30.704 30.704 54.8 58.4 72.576 81.376l-153.952 0 0-153.952c22.976 17.776 50.672 41.872 81.376 72.576l0 0zM896 944c0 8.672-7.328 16-16 16l-736 0c-8.672 0-16-7.328-16-16l0-864c0-8.672 7.328-16 16-16 0 0 495.952 0 496 0l0 224c0 17.68 14.32 32 32 32l224 0 0 624z"/>
          </svg>
          <div>WORD</div>
        </a>
        <a onClick={this.handleExportPdf.bind(this)}>
          <svg viewBox="0 0 1024 1024">
            <path d="M912 217.142857q16 16 27.428571 43.428571t11.428571 50.285714l0 658.285714q0 22.857143-16 38.857143t-38.857143 16l-768 0q-22.857143 0-38.857143-16t-16-38.857143l0-914.285714q0-22.857143 16-38.857143t38.857143-16l512 0q22.857143 0 50.285714 11.428571t43.428571 27.428571zm-253.714286-139.428571l0 214.857143 214.857143 0q-5.714286-16.571429-12.571429-23.428571l-178.857143-178.857143q-6.857143-6.857143-23.428571-12.571429zm219.428571 873.142857l0-585.142857-237.714286 0q-22.857143 0-38.857143-16t-16-38.857143l0-237.714286-438.857143 0 0 877.714286 731.428571 0zm-73.142857-256l0 182.857143-585.142857 0 0-109.714286 109.714286-109.714286 73.142857 73.142857 219.428571-219.428571zm-475.428571-109.714286q-45.714286 0-77.714286-32t-32-77.714286 32-77.714286 77.714286-32 77.714286 32 32 77.714286-32 77.714286-77.714286 32z"/>
          </svg>
          <div>JPG</div>
        </a>
      </div>
    )
  }
}

const Content = $Content

let exportWrap = null
class $Export extends React.Component {
  constructor(props) {
    super(props)
    this.state = {buttonDisabled: false}
  }
  handleClose() {
    ReactDOM.unmountComponentAtNode(exportWrap)
  }
  handleExport(e) {
    e.preventDefault()
    if (!this.state.buttonDisabled) {
      if (!exportWrap) {
        exportWrap = document.createElement('div')
        document.body.appendChild(exportWrap)
      }

      const that = this
      ReactDOM.render(<Modal
        title="导出" footer=""
        width="360" className="modaol-export"
        visible={true}
        closable={true}
        onCancel={this.handleClose}>
        <Content close={this.handleClose}/>
      </Modal>, exportWrap, function() {
        that.d = this
      })
    }
  }
  render() {
    const {children, ...props} = this.props
    props.onClick = this.handleExport.bind(this)
    return React.cloneElement(children, props)
  }
}

Export = $Export
